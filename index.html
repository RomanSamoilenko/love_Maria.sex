<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <!-- –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–æ –¥–ª—è Android: –∑–∞–ø—Ä–µ—Ç –∑—É–º–∞, –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –º–∞—Å—à—Ç–∞–± -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#000000">
    <title>üíüüíù</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap');

        body {
            margin: 0;
            overflow: hidden;
            background-color: #000;
            /* –ò–∑–Ω–∞—á–∞–ª—å–Ω–æ —Ç–µ–º–Ω—ã–π —Ñ–æ–Ω */
            background-image: radial-gradient(circle at center, #1a0005 0%, #000000 80%);
            font-family: 'Montserrat', sans-serif;
            color: white;
            /* –û—Ç–∫–ª—é—á–∞–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –∂–µ—Å—Ç—ã –±—Ä–∞—É–∑–µ—Ä–∞ (–∑—É–º, —Å–∫—Ä–æ–ª–ª) */
            touch-action: none;
            -webkit-user-select: none;
            user-select: none;
            transition: background-image 3s ease;
        }

        /* –°–æ—Å—Ç–æ—è–Ω–∏–µ —Ç—É–Ω–Ω–µ–ª—è: —Ñ–æ–Ω —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —Å–≤–µ—Ç–ª–µ–µ –∏ –ø—Ä–æ–∑—Ä–∞—á–Ω–µ–µ */
        body.tunnel-active {
            background-image: radial-gradient(circle at center, #5e1b2e 0%, #1a0508 100%);
        }

        canvas {
            display: block;
            position: absolute;
            top: 0;
            left: 0;
            z-index: 1;
            outline: none;
        }

        /* UI –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä */
        .ui-container {
            position: absolute;
            inset: 0;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            align-items: center;
            padding: 15vh 0 10vh 0;
            /* –û—Ç—Å—Ç—É–ø—ã –ø–æ–¥ –ø–∞–ª—å—Ü—ã */
            z-index: 10;
            pointer-events: none;
        }

        h1 {
            font-size: clamp(2rem, 7vw, 3.5rem);
            color: #ff3d68;
            text-shadow: 0 0 20px rgba(255, 61, 104, 0.6);
            margin: 0;
            text-align: center;
            pointer-events: auto;
            opacity: 0.9;
            padding: 0 20px;
        }

        .buttons {
            display: flex;
            flex-direction: column;
            /* –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ */
            gap: 20px;
            pointer-events: auto;
            width: 80%;
            max-width: 300px;
        }

        /* –ö–Ω–æ–ø–∫–∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω—ã –ø–æ–¥ —Ç–∞—á—Å–∫—Ä–∏–Ω */
        .btn {
            padding: 20px 0;
            font-size: 1.2rem;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 1px;
            transition: transform 0.1s;
            width: 100%;
            -webkit-tap-highlight-color: transparent;
            /* –£–±–∏—Ä–∞–µ–º —Å–∏–Ω–∏–π –∫–≤–∞–¥—Ä–∞—Ç –ø—Ä–∏ —Ç–∞–ø–µ */
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }

        #yesBtn {
            background: linear-gradient(45deg, #ff2a55, #ff7b9c);
            color: white;
            box-shadow: 0 0 20px rgba(255, 42, 85, 0.4);
        }

        #yesBtn:active {
            transform: scale(0.95);
        }

        #noBtn {
            background: rgba(255, 255, 255, 0.1);
            color: #ff7b9c;
            border: 1px solid rgba(255, 123, 156, 0.3);
            backdrop-filter: blur(5px);
        }

        /* –≠–∫—Ä–∞–Ω —É—Å–ø–µ—Ö–∞ */
        .success-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            /* –ü–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π —Ñ–æ–Ω, —á—Ç–æ–±—ã –≤–∏–¥–µ—Ç—å —Ç—É–Ω–Ω–µ–ª—å */
            background: rgba(0, 0, 0, 0.3);
            display: none;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 100;
            opacity: 0;
            transition: opacity 1s;
            pointer-events: none;
        }

        .success-overlay.visible {
            opacity: 1;
        }

        .success-overlay h2 {
            font-size: 3rem;
            color: #ff3d68;
            text-shadow: 0 0 20px rgba(255, 61, 104, 0.8);
            margin-bottom: 10px;
        }

        .success-overlay p {
            font-size: 1.2rem;
            color: #fff;
            opacity: 0.8;
        }
    </style>
</head>

<body>

    <div class="ui-container" id="ui">
        <h1>–ú—ã –ª—É—á—à–∞—è –ø–∞—Ä–∞?</h1>
        <div class="buttons">
            <button class="btn" id="yesBtn">–î–∞! üíù</button>
            <button class="btn" id="noBtn">–ù–µ—Ç</button>
        </div>
    </div>

    <div class="success-overlay" id="successScreen">
        <h2>üíü</h2>
        <p>–Ø –ª—é–±–ª—é —Ç–µ–±—è!</p>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>

    <script>
        // –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –º–æ–±–∏–ª—å–Ω–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
        const isMobile = window.innerWidth < 768;

        // --- 1. –°–¶–ï–ù–ê THREE.JS ---
        const scene = new THREE.Scene();
        // –¢–µ–º–Ω—ã–π —Ç—É–º–∞–Ω, –∫–æ—Ç–æ—Ä—ã–π —Å—Ç–∞–Ω–µ—Ç —Å–≤–µ—Ç–ª–µ–µ –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ
        const fogColor = new THREE.Color(0x050102);
        scene.fog = new THREE.FogExp2(fogColor, 0.012);

        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 2000);
        // –ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è –∫–∞–º–µ—Ä–∞: –¥–∞–ª—å—à–µ –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ, —á—Ç–æ–±—ã —Å–µ—Ä–¥—Ü–µ –≤–ª–µ–∑–ª–æ
        camera.position.z = isMobile ? 60 : 40;

        const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
        document.body.appendChild(renderer.domElement);

        // --- 2. –¢–ï–ö–°–¢–£–†–´ –°–¢–†–û–ì–û 2 –°–ú–ê–ô–õ–ò–ö–ê ---
        function createEmojiTexture(emoji) {
            const canvas = document.createElement('canvas');
            canvas.width = 128; canvas.height = 128;
            const ctx = canvas.getContext('2d');
            ctx.font = '90px serif';
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            ctx.fillText(emoji, 64, 64);
            return new THREE.CanvasTexture(canvas);
        }

        const textures = [
            createEmojiTexture('üíü'),
            createEmojiTexture('üíù')
        ];

        // --- 3. –ì–ï–ù–ï–†–ê–¶–ò–Ø –°–ï–†–î–¶–ê ---
        const heartGroup = new THREE.Group();
        scene.add(heartGroup);

        const particles = [];
        const particleCount = isMobile ? 400 : 700; // –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è Android

        for (let i = 0; i < particleCount; i++) {
            // –§–æ—Ä–º—É–ª–∞ —Å–µ—Ä–¥—Ü–∞
            const t = Math.random() * Math.PI * 2;
            const x = 16 * Math.pow(Math.sin(t), 3);
            const y = 13 * Math.cos(t) - 5 * Math.cos(2 * t) - 2 * Math.cos(3 * t) - Math.cos(4 * t);
            const z = (Math.random() - 0.5) * 10;

            const u = Math.random();
            const scaleFactor = Math.sqrt(u); // –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–æ—Å—Ç–∏

            const material = new THREE.SpriteMaterial({
                map: textures[i % 2], // –ß–µ—Ä–µ–¥—É–µ–º —Ç–æ–ª—å–∫–æ 2 —Ç–µ–∫—Å—Ç—É—Ä—ã
                transparent: true,
                opacity: 0.9,
                rotation: (Math.random() - 0.5) * 0.5
            });

            const sprite = new THREE.Sprite(material);

            // –ò—Å—Ö–æ–¥–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è (–∫–æ–º–ø–∞–∫—Ç–Ω–æ–µ —Å–µ—Ä–¥—Ü–µ)
            const pos = new THREE.Vector3(x * scaleFactor, y * scaleFactor, z * scaleFactor);
            sprite.position.copy(pos);
            sprite.scale.set(0, 0, 0); // –î–ª—è –∞–Ω–∏–º–∞—Ü–∏–∏ –ø–æ—è–≤–ª–µ–Ω–∏—è

            heartGroup.add(sprite);

            particles.push({
                sprite: sprite,
                // –°–æ—Ö—Ä–∞–Ω—è–µ–º –∫–æ–Ω—Ç—É—Ä —Å–µ—Ä–¥—Ü–∞ –¥–ª—è —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è —Ñ–æ—Ä–º—ã —Ç–æ–Ω–Ω–µ–ª—è
                tunnelShapeX: x * 4, // –£–º–Ω–æ–∂–∞–µ–º –Ω–∞ 4, —á—Ç–æ–±—ã —Ç–æ–Ω–Ω–µ–ª—å –±—ã–ª —à–∏—Ä–æ–∫–∏–º
                tunnelShapeY: y * 4,
                originalZ: z,
                phase: Math.random() * Math.PI * 2
            });

            // –ê–Ω–∏–º–∞—Ü–∏—è –≤—Ö–æ–¥–∞
            gsap.to(sprite.scale, {
                x: 1.5, y: 1.5,
                duration: 1.5,
                delay: i * 0.001,
                ease: "back.out(1.7)"
            });
        }

        // –ü–æ–¥–Ω–∏–º–∞–µ–º —Å–µ—Ä–¥—Ü–µ —á—É—Ç—å –≤—ã—à–µ —Ü–µ–Ω—Ç—Ä–∞ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö (–∏–∑-–∑–∞ –∫–Ω–æ–ø–æ–∫)
        heartGroup.position.y = isMobile ? 5 : 0;

        // --- 4. –õ–û–ì–ò–ö–ê –ê–ù–ò–ú–ê–¶–ò–ò –ò –¢–£–ù–ù–ï–õ–Ø ---
        let isTunnelMode = false;
        let tunnelSpeed = 0;
        let mouseX = 0, mouseY = 0;

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ç–∞—á–µ–π –∏ –º—ã—à–∏
        function onMove(e) {
            const x = e.touches ? e.touches[0].clientX : e.clientX;
            const y = e.touches ? e.touches[0].clientY : e.clientY;
            mouseX = (x - window.innerWidth / 2) / 300;
            mouseY = (y - window.innerHeight / 2) / 300;
        }
        window.addEventListener('mousemove', onMove);
        window.addEventListener('touchmove', onMove, { passive: false });

        function animate() {
            requestAnimationFrame(animate);
            const time = Date.now() * 0.001;

            if (!isTunnelMode) {
                // –†–ï–ñ–ò–ú 1: –°–ï–†–î–¶–ï (–ë–µ–∑ –ø—É–ª—å—Å–∞—Ü–∏–∏)
                // –ü–ª–∞–≤–Ω–æ–µ –≤—Ä–∞—â–µ–Ω–∏–µ –æ—Ç –ø–∞–ª—å—Ü–∞/–º—ã—à–∏
                heartGroup.rotation.y += (mouseX - heartGroup.rotation.y) * 0.05;
                heartGroup.rotation.x += (mouseY - heartGroup.rotation.x) * 0.05;

                particles.forEach(p => {
                    // –õ–µ–≥–∫–æ–µ –ø–∞—Ä–µ–Ω–∏–µ –Ω–∞ –º–µ—Å—Ç–µ
                    p.sprite.position.y += Math.sin(time * 2 + p.phase) * 0.02;
                });

            } else {
                // –†–ï–ñ–ò–ú 2: –ë–ï–°–ö–û–ù–ï–ß–ù–´–ô –¢–£–ù–ù–ï–õ–¨
                if (tunnelSpeed < 1.0) tunnelSpeed += 0.01; // –ü–ª–∞–≤–Ω—ã–π —Ä–∞–∑–≥–æ–Ω

                // –î–≤–∏–≥–∞–µ–º –∫–∞–º–µ—Ä—É –≤–ø–µ—Ä–µ–¥
                camera.position.z -= tunnelSpeed;

                // –í—Ä–∞—â–∞–µ–º —Å–∞–º —Ç–æ–Ω–Ω–µ–ª—å –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∞ —Å–ø–∏—Ä–∞–ª–∏
                heartGroup.rotation.z -= 0.005;

                // –õ–û–ì–ò–ö–ê –ë–ï–°–ö–û–ù–ï–ß–ù–û–°–¢–ò
                particles.forEach(p => {
                    // –ï—Å–ª–∏ —á–∞—Å—Ç–∏—Ü–∞ –æ—Å—Ç–∞–ª–∞—Å—å –¥–∞–ª–µ–∫–æ –ø–æ–∑–∞–¥–∏ –∫–∞–º–µ—Ä—ã
                    if (p.sprite.position.z > camera.position.z + 10) {
                        // –ü–µ—Ä–µ–º–µ—â–∞–µ–º –µ—ë –¥–∞–ª–µ–∫–æ –≤–ø–µ—Ä–µ–¥
                        p.sprite.position.z -= 500; // –î–ª–∏–Ω–∞ —Å–µ–≥–º–µ–Ω—Ç–∞ —Ç—É–Ω–Ω–µ–ª—è
                    }
                });
            }

            renderer.render(scene, camera);
        }
        animate();

        // --- 5. UI –ò –í–ó–ê–ò–ú–û–î–ï–ô–°–¢–í–ò–ï ---
        const noBtn = document.getElementById('noBtn');
        const yesBtn = document.getElementById('yesBtn');
        const ui = document.getElementById('ui');
        const successScreen = document.getElementById('successScreen');

        // –§—É–Ω–∫—Ü–∏—è –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è –∫–Ω–æ–ø–∫–∏ "–ù–µ—Ç"
        function moveNoBtn() {
            const margin = 20;
            // –û–±–ª–∞—Å—Ç—å –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è
            const maxX = window.innerWidth - noBtn.offsetWidth - margin;
            const maxY = window.innerHeight - noBtn.offsetHeight - margin;

            const x = margin + Math.random() * (maxX - margin * 2);
            const y = margin + Math.random() * (maxY - margin * 2);

            noBtn.style.position = 'fixed';
            noBtn.style.left = x + 'px';
            noBtn.style.top = y + 'px';

            // –í–∏–±—Ä–∞—Ü–∏—è –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –Ω–∞–∂–∞—Ç—å (Android —Ñ–∏—à–∫–∞)
            if (navigator.vibrate) navigator.vibrate(50);
        }

        // –î–ª—è Android: –∏—Å–ø–æ–ª—å–∑—É–µ–º touchstart –¥–ª—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ–π —Ä–µ–∞–∫—Ü–∏–∏
        noBtn.addEventListener('touchstart', (e) => {
            e.preventDefault(); // –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º –∫–ª–∏–∫
            moveNoBtn();
        });
        noBtn.addEventListener('mouseover', moveNoBtn); // –î–ª—è –ü–ö

        yesBtn.addEventListener('click', () => {
            // 1. –°–∫—Ä—ã–≤–∞–µ–º UI
            gsap.to(ui, { opacity: 0, duration: 0.5, onComplete: () => ui.style.display = 'none' });

            // 2. –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ñ–∏–Ω–∞–ª—å–Ω—ã–π —Ç–µ–∫—Å—Ç
            successScreen.style.display = 'flex';
            setTimeout(() => successScreen.classList.add('visible'), 100);

            // 3. –í–∫–ª—é—á–∞–µ–º —Ä–µ–∂–∏–º —Ç—É–Ω–Ω–µ–ª—è
            isTunnelMode = true;
            document.body.classList.add('tunnel-active'); // –í–∫–ª—é—á–∞–µ–º —Å–≤–µ—Ç–ª—ã–π —Ñ–æ–Ω

            // –ú–µ–Ω—è–µ–º —Ç—É–º–∞–Ω –Ω–∞ –±–æ–ª–µ–µ –ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π/—Å–≤–µ—Ç–ª—ã–π
            gsap.to(scene.fog, { density: 0.004, duration: 3 });
            gsap.to(scene.fog.color, { r: 0.2, g: 0.05, b: 0.1, duration: 3 });

            // 4. –¢–†–ê–ù–°–§–û–†–ú–ê–¶–ò–Ø –ß–ê–°–¢–ò–¶ –í –ö–û–†–ò–î–û–†
            // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –≤—Ä–∞—â–µ–Ω–∏–µ –≥—Ä—É–ø–ø—ã
            gsap.to(heartGroup.rotation, { x: 0, y: 0, z: 0, duration: 1 });

            particles.forEach((p, i) => {
                // –†–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ–º —á–∞—Å—Ç–∏—Ü—ã –≤–¥–æ–ª—å –æ—Å–∏ Z –ø–µ—Ä–µ–¥ –∫–∞–º–µ—Ä–æ–π
                // –¢–µ–∫—É—â–∞—è –ø–æ–∑–∏—Ü–∏—è –∫–∞–º–µ—Ä—ã - (–∏–Ω–¥–µ–∫—Å * —à–∞–≥)
                const targetZ = camera.position.z - 20 - (i * 1.2);

                gsap.to(p.sprite.position, {
                    x: p.tunnelShapeX, // –†–∞—Å—à–∏—Ä—è–µ–º –¥–æ —Ñ–æ—Ä–º—ã —Ç–æ–Ω–Ω–µ–ª—è
                    y: p.tunnelShapeY,
                    z: targetZ,        // –í—ã—Å—Ç—Ä–∞–∏–≤–∞–µ–º –≤ –¥–ª–∏–Ω—É
                    duration: 2.5,
                    ease: "power2.inOut"
                });

                // –î–µ–ª–∞–µ–º —á–∞—Å—Ç–∏—Ü—ã –∫—Ä—É–ø–Ω–µ–µ –∏ –ø—Ä–æ–∑—Ä–∞—á–Ω–µ–µ
                gsap.to(p.sprite.scale, { x: 3, y: 3, duration: 2 });
                gsap.to(p.sprite.material, { opacity: 0.6, duration: 2 });
            });
        });

        // –†–µ—Å–∞–π–∑ –æ–∫–Ω–∞
        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
            // –ê–¥–∞–ø—Ç–∞—Ü–∏—è –ø—Ä–∏ –ø–æ–≤–æ—Ä–æ—Ç–µ —ç–∫—Ä–∞–Ω–∞
            const isMobileNow = window.innerWidth < 768;
            camera.position.z = isMobileNow ? 60 : 40;
        });

    </script>
</body>

</html>
